(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,function(e,t,n){},,,,,function(e,t,n){e.exports=n.p+"static/media/logo.5901d734.svg"},,,function(e,t,n){e.exports=n(26)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(5),c=n.n(l),o=(n(18),n(6)),s=n(7),u=n(10),i=n(8),d=n(11),m=(n(4),function(){return r.a.createElement("header",null,r.a.createElement("span",{className:"title"},r.a.createElement("span",{className:"icon"},"\u26a0")," Legible Works"))}),f=(n(19),function(e){var t=e.count,n=e.type;return r.a.createElement("span",{className:"alert ".concat(n)},t||"?")}),p=function(e){var t=e.alerts;return r.a.createElement("div",null,r.a.createElement(f,{count:t.total,type:"total"})," alerts (",r.a.createElement(f,{count:t.ingested,type:"ingested"})," ingested,"," ",r.a.createElement(f,{count:t.pending,type:"pending"})," pending)")},E=(n(20),function(e){var t=e.lastUpdate;return r.a.createElement("div",null,"Last updated: ",r.a.createElement("span",{className:"updated"},t))}),h=(n(21),function(){return r.a.createElement("div",null,"Licensed under AGPL 3+. Source at ",r.a.createElement("a",{href:"https://github.com/orochi-kazu/metro-planned-works"},"GitHub"))}),v=function(e){var t=e.alerts,n=e.lastUpdate;return r.a.createElement("footer",null,r.a.createElement(p,{alerts:t}),r.a.createElement(E,{lastUpdate:n}),r.a.createElement(h,null))},g=n(9),b=n.n(g),w=(n(22),function(){return r.a.createElement("div",{className:"empty-content"},r.a.createElement("img",{className:"logo",src:b.a,alt:"App logo: a caution sign"}))}),k=(n(23),function(){return r.a.createElement("div",{className:"outage uningested bordered"},"Pending")}),U=function(e){var t=e.area,n=e.from,a=e.to;return r.a.createElement("div",{className:"outage bordered"},r.a.createElement("div",null,t),r.a.createElement("div",null,"Starts: ",n.iso),r.a.createElement("div",null,"Ends: ",a.iso))},y=function(e){var t=e.id,n=e.outages,a=e.link;return r.a.createElement("div",{className:"detail bordered"},r.a.createElement("div",{className:"alert-title"},r.a.createElement("span",null,t),r.a.createElement("span",null,r.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},"Metro"))),r.a.createElement("div",null,n?n.map(function(e,t){return r.a.createElement(U,Object.assign({},e,{key:t}))}):r.a.createElement(k,null)))},N=function(e){return e.results.map(function(e){return r.a.createElement(y,Object.assign({},e,{key:e.id}))})},j=(n(24),n(1)),C=n.n(j),D=n(2),O=function(e){return{fetch:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return fetch(e).then(function(e){return e.json()})})}},x={fetchDate:"Unknown",releaseDate:"Unknown",alerts:[]},S={save:function(e){x=e},lastUpdated:function(){return x.releaseDate},alertCounts:function(){return function(){var e=x.alerts.length,t=x.alerts.filter(function(e){return e.outages}).length;return{total:e,ingested:t,pending:e-t}}()},alerts:function(){return x.alerts}},L=function(){var e=Object(D.a)(C.a.mark(function e(t){var n,a,r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.detailsClient,a=t.store,e.next=3,n.fetch();case 3:return r=e.sent,a.save(r),e.abrupt("return",{lastUpdated:function(){return a.lastUpdated()},alertCounts:function(){return a.alertCounts()},alertDetails:function(){return a.alerts()}});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(D.a)(C.a.mark(function e(){var t,n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=O("https://orochi-kazu.github.io/metro-planned-works/alert_details.json"),e.next=3,L({detailsClient:t,store:S});case 3:return n=e.sent,e.abrupt("return",{domain:{alerts:n}});case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),W=null,z=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(u.a)(this,Object(i.a)(t).call(this,e))).state={alertCounts:{},lastUpdated:"Unknown",alertDetails:[]},A().then(function(e){W=e.domain.alerts,n.setState({lastUpdated:W.lastUpdated(),alertCounts:W.alertCounts(),alertDetails:W.alertDetails()})}),n}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(m,null),r.a.createElement("div",{className:"content"},(this.state.alertDetails||[]).length>0?r.a.createElement(N,{results:this.state.alertDetails}):r.a.createElement(w,null)),r.a.createElement(v,{alerts:this.state.alertCounts,lastUpdate:this.state.lastUpdated}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[12,1,2]]]);
//# sourceMappingURL=main.ec37ad27.chunk.js.map