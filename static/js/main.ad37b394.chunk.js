(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,function(t,e,n){},,,,,function(t,e,n){t.exports=n.p+"static/media/logo.5901d734.svg"},,,function(t,e,n){t.exports=n(25)},,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},,function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(5),c=n.n(o),u=(n(18),n(6)),l=n(7),s=n(10),i=n(8),d=n(11),p=(n(4),function(){return r.a.createElement("header",null,r.a.createElement("span",{className:"title"},r.a.createElement("span",{className:"icon"},"\u26a0")," Legible Works"))}),f=(n(19),function(t){var e=t.count,n=t.type;return r.a.createElement("span",{className:"alert ".concat(n)},e||"?")}),m=function(t){var e=t.alerts;return r.a.createElement("div",null,r.a.createElement(f,{count:e.total,type:"total"})," alerts (",r.a.createElement(f,{count:e.ingested,type:"ingested"})," ingested,"," ",r.a.createElement(f,{count:e.pending,type:"pending"})," pending)")},h=(n(20),function(t){var e=t.lastUpdate;return r.a.createElement("div",null,"Last updated: ",r.a.createElement("span",{className:"updated"},e))}),v=(n(21),function(){return r.a.createElement("div",null,"Licensed under AGPL 3+. Source at ",r.a.createElement("a",{href:"https://github.com/orochi-kazu/metro-planned-works"},"GitHub"))}),g=function(t){var e=t.alerts,n=t.lastUpdate;return r.a.createElement("footer",null,r.a.createElement(m,{alerts:e}),r.a.createElement(h,{lastUpdate:n}),r.a.createElement(v,null))},E=n(9),w=n.n(E),b=(n(22),function(){return r.a.createElement("div",{className:"empty-content"},r.a.createElement("img",{className:"logo",src:w.a,alt:"App logo: a caution sign"}))}),k=(n(23),n(1)),U=n.n(k),y=n(2),C=function(t){return{fetch:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(){return fetch(t).then(function(t){return t.json()})})}},j={fetchDate:"Unknown",releaseDate:"Unknown",alerts:[]},N={save:function(t){j=t},lastUpdated:function(){return j.releaseDate},alertCounts:function(){return function(){var t=j.alerts.length,e=j.alerts.filter(function(t){return t.outages}).length;return{total:t,ingested:e,pending:t-e}}()}},O=function(){var t=Object(y.a)(U.a.mark(function t(e){var n,a,r;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.detailsClient,a=e.store,t.next=3,n.fetch();case 3:return r=t.sent,a.save(r),t.abrupt("return",{lastUpdated:function(){return a.lastUpdated()},alertCounts:function(){return a.alertCounts()}});case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),x=function(){var t=Object(y.a)(U.a.mark(function t(){var e,n;return U.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=C("https://orochi-kazu.github.io/metro-planned-works/alert_details.json"),t.next=3,O({detailsClient:e,store:N});case 3:return n=t.sent,t.abrupt("return",{domain:{alerts:n}});case 5:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),L=null,S=function(t){function e(t){var n;return Object(u.a)(this,e),(n=Object(s.a)(this,Object(i.a)(e).call(this,t))).state={alertCounts:{},lastUpdated:"Unknown"},x().then(function(t){L=t.domain.alerts,n.setState({lastUpdated:L.lastUpdated(),alertCounts:L.alertCounts()})}),n}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p,null),r.a.createElement("div",{className:"content"},r.a.createElement(b,null)),r.a.createElement(g,{alerts:this.state.alertCounts,lastUpdate:this.state.lastUpdated}))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}],[[12,1,2]]]);
//# sourceMappingURL=main.ad37b394.chunk.js.map